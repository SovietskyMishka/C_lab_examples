#include <stdio.h>	/*Для ввода и вывода*/
#include <math.h>	/*Для математических функций*/
#include <locale.h>		/*Для смены языка*/
void main()
{
	setlocale(LC_ALL, "rus"); /*подключение кириллицы в консоли*/
	int n = 0;
	double x, EPS, L, R = 0, Sum = R;
	L = R;
	printf("введите значение |x| < 1:\n");
	scanf_s("%lf", &x); /*ввод положительных значений меньше 1 (0,01)*/
	printf("введите погрешость EPS:\n");
	scanf_s("%lf", &EPS); /*Ввод погрешности*/
	if ((x > -1) && (x < 1))
	{
		L = 0.25 * log((1 + x) / (1 - x)) + 0.25 * atan(x); /*Высчитывание левой части*/
		printf("Левая часть равна: %lf\n", L);
		while (fabs(L - R) > EPS && n < 1000)	/*Цикл пока левая часть минус правая больше погрешности и кол-во шагов меньше 1000*/
		{
			Sum += pow(x, 4 * n + 1) / (4 * n + 1);		/*Формула по заданию*/
			R = Sum;	/*Присваивание правой части*/
			n++;	/*Добавление количества шагов +1*/
		}
		printf("Правая часть равна: %lf\n", R);
		printf("Количество шагов: %d\n", n);
	}
	else
		printf("Введено некорректное значение x = %.lf\n", x);
	getchar(); getchar();	/*Конец программы*/
}