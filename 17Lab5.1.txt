#include <stdio.h> //	Ввод и вывод
#include <stdlib.h>	// Для rand()
#include <time.h>	//	Для srand(time())
#include <math.h>	//	Для математических функций
#include <locale.h>	//	Смена языка
int random(int a, int b) //	Функция для получения случайного значения
{
	return a + rand() % (b - a + 1); //	Возвращение случаного значения
}
void vvod_klav(int* a, int N, int i = 0)	//	Функция для ввода значений в массив с клавиатуры
{
	for (i = 0; i < N; i++) {	// Цикл для заполнения элементов массива
		printf("Эл-т A[%d] = ", i);
		scanf_s("%d", &a[i]);	//	Ввод значения в массив
		printf("\n");
	}
}
void vvod_rand(int a[], int N, int i = 0) //	Функция для заполнения массива случайными значениями
{
	for (i = 0; i < N; i++)
		a[i] = random(1, 20);	//	Присваивание i-ому элементу массива случаного значения
}
void calculate(int* a, int N) //	Функция для 
{
	int i = 1, j, sum = 0;
	for (j = 1; j < N; j++) {	//	Цикл по j, пока j меньше размера массива
		for (i; i >= 0; i--)	// Вложенный цикл по i, пока i больше или равно 0
			sum += a[i];	//	сумма элементов массива 
		a[j] = sum / (j + 1);	//	Элемент массива j-ый равен сумме элементов массива деленое на номер элемента массива + 1
		sum = 0;	//Обнуление суммы элементов массива
		i = j + 1;	//	i = номер элемента массива + 1
	}
}
void vivod(int* a, int N, int i = 0)	// Функция для вывода элементов массива
{
	for (i = 0; i < N; i++)
		printf("Эл-т A[%d] = %d\n", i, a[i]);
}
void main() //	Главная функция
{
	setlocale(LC_ALL, "rus");	//	подключение кириллицы в консоли
	int k, r = 0, p, Sum;
	int* A;	//	Объявление массива A
	srand(time(NULL));	//	Обнуление времени для создания базы чисел для генерации случайных чисел 
	printf("Введите количество элементов в массиве\n");
	scanf_s("%d", &k);	// Ввод k - кол-ва элементов массива
	A = (int*)malloc(k * sizeof(int));	//	Определение размера массива A
	printf("Введите способ ввода:\n1 - клавиатура\nЛюбой другой - рандом\n");
	scanf_s("%d", &p);	//	Ввод переменной для выбора способа ввода массива
	if (p == 1)
		vvod_klav(A, k, r);	//	Вызов функции ввода с клавиатуры, если p = 1
	else
		vvod_rand(A, k, r);	//	Вызов функции случайного ввода массива, если p не равно 1
	vivod(A, k, r);	//	Вызов функии вывода массива
	calculate(A, k);	//	Вызов функции
	printf("\n");
	vivod(A, k, r);	//	Вызов функции вывода массива
	getchar(); getchar();	//	конец программы
}